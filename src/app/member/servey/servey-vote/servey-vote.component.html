<div class="content">
    <div class="survey-main">
        <div class="page-main">
            <div class="page-action">
				<div class="page-heading">
					<svg xmlns="http://www.w3.org/2000/svg" width="34" height="38" viewBox="0 0 34 38" fill="none">
						<path
							d="M3.96696 0C7.75633 0 11.5457 0 15.3341 0C15.4017 0.203761 15.2008 0.23756 15.1101 0.325437C11.3786 3.92167 10.017 8.2721 11.2531 13.284C13.0039 20.3847 20.3866 24.598 27.4419 22.6503C27.7703 22.5595 27.8137 22.628 27.8118 22.9361C27.8002 24.9708 27.7731 27.0065 27.8185 29.0412C27.8446 30.2058 27.0479 30.8625 26.0108 30.848C23.6825 30.8152 21.3542 30.8354 19.025 30.8393C18.4591 30.8403 18.5412 30.7611 18.5392 31.3057C18.5354 32.763 18.5296 34.2202 18.5421 35.6764C18.5469 36.2211 18.376 36.6479 17.8661 36.8835C17.3389 37.1269 16.8927 36.9685 16.4804 36.5919C15.7059 35.885 14.9111 35.2004 14.1376 34.4925C13.9561 34.3264 13.8547 34.3341 13.675 34.4983C12.8755 35.2303 12.0633 35.9497 11.2463 36.6643C10.7741 37.0767 10.2275 37.1086 9.75724 36.7744C9.38931 36.5127 9.26764 36.139 9.2686 35.7054C9.27053 34.1999 9.26281 32.6954 9.27536 31.1898C9.27729 30.9214 9.22804 30.8248 8.92964 30.8287C7.59023 30.847 6.25082 30.8238 4.91237 30.8403C3.3692 30.8586 2.09932 30.2676 1.06217 29.159C0.467305 28.5226 0.00570522 27.8003 0.00570522 26.8906C0.000876771 19.4741 -0.00684875 12.0566 0.0105337 4.63917C0.0153621 2.89417 0.827507 1.56538 2.31177 0.635424C2.82648 0.313849 3.41169 0.201829 3.96696 0ZM21.5976 27.7491C22.5507 27.7491 23.5029 27.7452 24.456 27.752C24.6385 27.753 24.739 27.7375 24.7351 27.5077C24.7216 26.6414 24.7225 25.7743 24.7341 24.908C24.737 24.6859 24.6453 24.655 24.456 24.655C22.5748 24.6608 20.6937 24.6627 18.8115 24.6531C18.5798 24.6521 18.5305 24.7294 18.5334 24.9438C18.544 25.7858 18.546 26.6289 18.5325 27.471C18.5286 27.6921 18.5856 27.7568 18.8115 27.7539C19.7396 27.7414 20.6686 27.7491 21.5976 27.7491ZM6.7974 27.7481C7.53326 27.7481 8.26911 27.7433 9.00497 27.752C9.19231 27.7539 9.28019 27.7269 9.27633 27.5057C9.26281 26.6395 9.26667 25.7723 9.27439 24.9051C9.27633 24.7226 9.22804 24.6541 9.03297 24.655C7.57382 24.6627 6.11369 24.6463 4.65454 24.6647C3.75355 24.6763 3.08915 25.3687 3.09977 26.2291C3.1104 27.0847 3.79604 27.7404 4.69992 27.7472C5.39812 27.753 6.09824 27.7481 6.7974 27.7481ZM24.964 0C25.2556 0.143888 25.581 0.126505 25.8901 0.189275C30.197 1.06129 33.3993 4.52136 33.9294 8.88435C34.56 14.074 30.8595 19.0251 25.7114 19.8797C20.3064 20.7768 15.338 17.4461 14.1299 12.1146C12.8861 6.63139 16.7353 0.989832 22.2967 0.136162C22.4628 0.111054 22.655 0.144853 22.7921 0C23.5164 0 24.2407 0 24.964 0ZM25.4893 7.61253C25.4883 7.61253 25.4874 7.61253 25.4874 7.61253C25.4874 7.11906 25.4989 6.6256 25.4845 6.13213C25.4594 5.27749 24.7921 4.62758 23.9558 4.62565C23.1176 4.62276 22.431 5.27073 22.4194 6.12151C22.402 7.43291 22.4136 8.74529 22.4145 10.0577C22.4145 10.4623 22.5652 10.8099 22.8481 11.0948C23.6303 11.8809 24.4068 12.6718 25.2044 13.4405C25.8273 14.0402 26.7495 14.0189 27.3521 13.425C27.9566 12.8292 27.9644 11.8847 27.3637 11.2513C27.1483 11.0233 26.9204 10.808 26.7003 10.5859C26.3024 10.1842 25.7529 9.84424 25.5511 9.36043C25.3493 8.87758 25.4951 8.24989 25.4883 7.68592C25.4893 7.66082 25.4893 7.63667 25.4893 7.61253Z"
							fill="#68759F" />
					</svg>
					<h1>{{language.Survey.survey_vote}}</h1>
				</div>
				<div class="page-action-right">
					<button class="disabled" routerLink="/survey"
						[ngStyle]="{'border-color':setTheme.button_bgcolor,'background-color':setTheme.button_bgcolor,'color':'#ffffff'}">
						<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M9.68969 13.75L5.96875 10L9.68969 6.25M6.48578 10H14.0312" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M19 10C19 5.03125 14.9688 1 10 1C5.03125 1 1 5.03125 1 10C1 14.9688 5.03125 19 10 19C14.9688 19 19 14.9688 19 10Z" stroke="white" stroke-width="1.5" stroke-miterlimit="10"/>
                        </svg>
						&nbsp;<span [ngStyle]="{'color':'#ffffff'}">{{language.Survey.back}}</span>
                    </button>
				</div>
			</div>
            <div class="survey-view-wrapper" *ngFor="let item of surveyData">
                <div class="row">
                    <div class="col-md-6" *ngIf="item.survey_status == 0">
                        <div class="card">
                            <div class="card-body">
                                <div class="title-survey-wrap">
                                    <h2>{{item.title}}</h2>
                                    <div class="msg-by-right">
                                        <label>{{language.Survey.by}} <a>{{item.user_name.firstname}} {{item.user_name.lastname}}</a></label>
                                        <div class="duration">{{item. surveyStartDate | date: 'dd. MMMM yyyy'}}</div>
                                    </div>
                                </div>
                                <div class="msg-text-wrap">
                                    <div class="detail-big-img">
                                        <img  *ngIf="showImage" onContextMenu="return false;" [src]="showImage ? showImage : '../../../assets/img/no_image.png'"  alt="" loading="lazy">
                                        <img  *ngIf="showFile" onContextMenu="return false;" src="../../../../assets/img/doc-icons/folder.svg"  alt="" loading="lazy">
                                    </div><br>
                                    <div *ngIf="showFile">
                                        <div class="attach_btn preview_img">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#E12217" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round" class="feather feather-download">
                                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"  [ngStyle]="{'stroke':'#fff'}" />
                                                <polyline points="7 10 12 15 17 10" [ngStyle]="{'stroke':'#fff'}" />
                                                <line x1="12" y1="15" x2="12" y2="3" [ngStyle]="{'stroke':'#fff'}" />
                                            </svg>
                                            <a  href="{{showFile}}" [ngStyle]="{'border-color':setTheme.button_bgcolor,'color':setTheme.button_bgcolor}">
                                                {{language.create_event.download_attachment}}
                                            </a>
                                        </div>
                                    </div><br>

                                    <p [innerHTML]="item.description"></p>
                                    <div class="alert alert-info" *ngIf="item.surveyOption == 0">
                                        <img onContextMenu="return false;" src="assets/img/info-icon.svg" alt="" loading="lazy" />{{language.Survey.single_option}}
                                    </div>
                                    <div class="alert alert-info" *ngIf="item.surveyOption == 1">
                                        <img onContextMenu="return false;" src="assets/img/info-icon.svg" alt="" loading="lazy" />{{language.Survey.multiple_option}}
                                    </div>
                                    <div class="voting-options" *ngIf="item.surveyOption == 0">
                                        <form [formGroup]="surveyVoteForm" (ngSubmit)="serveyProcess()">
                                            <div class="custom-control custom-radio" *ngFor="let fields of item.surveyAnswer; let i = index">
                                                <input [type]="'radio'" class="input-radio" name="radio" id="{{i}}"
                                                    [value]="fields.id" (change)="onradioChange($event)" />
                                                <label for="{{i}}">{{fields.surveyAnswer}}</label>
                                            </div>
                                            <div *ngIf="errorAnswer.isError == true" class="text-danger">
                                                {{ errorAnswer.errorMessage }}
                                            </div>
                                            <div class="profile_sub_btn event_sub_btn"   *ngIf="btnDisable == 'true'">
                                                <button type="button" disabled class="save_btn ">{{language.Survey.to_vote}}</button>
                                                <span class="duration-left">{{item.surveyEndDate | date: 'dd. MMMM yyyy'}}</span>
                                            </div>
                                            <div class="profile_sub_btn event_sub_btn" *ngIf="btnDisable == 'false'" >
                                                <button type="submit" class="save_btn"> {{language.Survey.to_vote}} </button>
                                              <span class="duration-left">{{item.surveyEndDate | date: 'dd. MMMM yyyy'}}</span>
                                          </div>
                                        </form>
                                    </div>
                                    <div class="voting-options" *ngIf="item.surveyOption == 1">
                                        <form [formGroup]="surveyVoteForm" (ngSubmit)="serveyProcess()">
                                            <div class="custom-control custom-radio" *ngFor="let fields of item.surveyAnswer; let i = index">
                                                <input [type]="'checkbox'" class="input-checkbox" id="{{i}}" [value]="fields.id" (change)="onCheckboxChange($event)" />
                                                <label for="{{i}}">{{fields.surveyAnswer}}</label>
                                            </div>
                                            <div *ngIf="errorAnswer.isError == true" class="text-danger"> {{ errorAnswer.errorMessage }}</div>
                                            <div class="profile_sub_btn event_sub_btn">
                                                <button type="submit" *ngIf=" btnDisable == 'false'" class="save_btn">
                                                    <span >{{language.Survey.to_vote}}!</span>
                                                </button>
                                                <button type="button" *ngIf=" btnDisable == 'true'" disabled class="Cancel_btn">
                                                    <span >{{language.Survey.to_vote}}!</span>
                                                </button>
                                                <span class="duration-left">{{item.surveyEndDate | date: 'dd. MMMM yyyy'}}</span>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6" *ngIf="showVote(item)">
                        <div class="card">
                            <div class="card-body">
                                <div class="title-survey-wrap" *ngIf="surveyVoteResult">
                                    <h2>{{language.Survey.voting_result}}<span>({{language.Survey.total_vote}} :{{surveyVoteResult.TotalCount}})</span></h2>
                                </div>
                                <div class="voting-results-graph" *ngFor="let value of item.surveyAnswer; let j = index">
                                    <div class="voting-results-wrap">
                                        <div class="vote-info">
                                            <div class="date">{{value.surveyAnswer}}</div>
                                            <div class="vote-info-right" *ngIf="surveyVoteResult">
                                                <div class="vote-inner">
                                                <div class="votes-count" *ngFor="let val of surveyVoteResult.answerCount">
                                                    <span *ngIf="val.AnswerId == value.id">{{val.count}} {{language.Survey.votes}}</span>
                                                </div>
                                                    <div class="votes-show-all">
                                                    <a data-bs-toggle="modal" data-bs-target="#exModal" (click)="getAnswerResult(value.id)">
                                                        <a>{{language.Survey.show_all}}</a>
                                                    </a>
                                                </div>
                                            </div>
                                            </div>
                                        </div>
                                        <div *ngIf="surveyVoteResult">
                                            <div *ngFor="let data of surveyVoteResult.answerCount;let k = index">
                                                <div *ngIf="k == 0">
                                                    <progress-bar *ngIf="data.AnswerId == value.id"
                                                        [progress]="data.per" [color]="'#FB5F5F'">
                                                    </progress-bar>
                                                </div>
                                                <div *ngIf="k == 1">
                                                    <progress-bar *ngIf="data.AnswerId == value.id"
                                                        [progress]="data.per" [color]="'#7070e3'">
                                                    </progress-bar>
                                                </div>
                                                <div *ngIf="k == 2">
                                                    <progress-bar *ngIf="data.AnswerId == value.id"
                                                        [progress]="data.per" [color]="'#4fb96d'">
                                                    </progress-bar>
                                                </div>
                                                <div *ngIf="k == 3">
                                                    <progress-bar *ngIf="data.AnswerId == value.id"
                                                        [progress]="data.per" [color]="'#e1e132'">
                                                    </progress-bar>
                                                </div>
                                                <div *ngIf="k > 3 ">
                                                    <progress-bar *ngIf="data.AnswerId == value.id"
                                                        [progress]="data.per" [color]="'#7bf1f1'">
                                                    </progress-bar>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body" *ngIf="item.survey_status == 1">
                                    <div class="title-survey-wrap">
                                        <h2>{{item.title}}</h2>
                                        <div class="msg-by-right">
                                            <label>{{language.Survey.by}} <a>{{item.user_name.firstname}} {{item.user_name.lastname}}</a></label>
                                            <div class="duration">{{item. month}}</div>
                                        </div>
                                    </div>
                                    <div class="msg-text-wrap">
                                        <p [innerHTML]="item.description"></p>
                                        <div class="card-body">
                                            <div class="empty-data-image">
                                                <!-- <img onContextMenu="return false;" src="assets/img/no-event-img.png" alt="{{language.Survey.survey_close}}" loading="lazy"><br> -->
                                                <h3>{{language.Survey.survey_close}}</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="row" *ngIf="showVote(item)">
                </div> -->
            </div>
        </div>
    </div>
</div>
<div class="modal fade change_pass_section faq_edit all_news" id="exModal" tabindex="-1" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="editFaq">{{language.Survey.voting_setting}}</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i class="nc-icon nc-simple-remove"></i></button>
            </div>
            <div class="modal-body">
                <p>{{language.Survey.people_voting}}: {{surveyAnswerName}}</p>
                <h4> {{language.Survey.number_of_vote}}: {{ voteCount }}</h4>

                <div *ngIf="show_name == 'false'">
                    <div *ngFor="let val of vote_setting">
                        <h3>{{val.user_details.firstname}} {{val.user_details.lastname}}</h3>
                    </div>
                </div>
                <div *ngIf="show_name == 'true'">
                    <div *ngFor="let val of vote_setting; let i = index">
                        <h3 *ngIf="val.id">{{language.Survey.anonymous}}</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
